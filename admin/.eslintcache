[{"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\index.js":"1","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\router.js":"2","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Login\\login.jsx":"3","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Login\\Login.jsx":"4","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\AddArticle\\AddArticle.jsx":"5","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Data\\Data.jsx":"6","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Chat\\Chat.jsx":"7","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\ArticlesList\\ArticlesList.jsx":"8","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\App.jsx":"9","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\utils\\request.js":"10","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\api\\api.js":"11"},{"size":476,"mtime":1608024086798,"results":"12","hashOfConfig":"13"},{"size":915,"mtime":1608802062402,"results":"14","hashOfConfig":"13"},{"size":1678,"mtime":1606724708599,"results":"15","hashOfConfig":"16"},{"size":2463,"mtime":1608775653272,"results":"17","hashOfConfig":"13"},{"size":11809,"mtime":1608799729686,"results":"18","hashOfConfig":"13"},{"size":286,"mtime":1608775653271,"results":"19","hashOfConfig":"13"},{"size":123,"mtime":1607998221108,"results":"20","hashOfConfig":"13"},{"size":261,"mtime":1608024660176,"results":"21","hashOfConfig":"13"},{"size":7093,"mtime":1608802045320,"results":"22","hashOfConfig":"13"},{"size":3270,"mtime":1608775653269,"results":"23","hashOfConfig":"13"},{"size":665,"mtime":1608799596219,"results":"24","hashOfConfig":"13"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},"1a8ql3p",{"filePath":"28","messages":"29","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"30","messages":"31","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"s5x0hj",{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"27"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\index.js",[],["49","50"],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\router.js",["51"],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Login\\login.jsx",["52","53","54"],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Login\\Login.jsx",[],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\AddArticle\\AddArticle.jsx",["55","56","57","58"],"import { useState,useEffect} from \"react\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Input,\r\n  Button,\r\n  Drawer,\r\n  Form,\r\n  DatePicker,\r\n  Switch,\r\n  Tag,\r\n  Upload,\r\n  message,\r\n  Select,\r\n} from \"antd\";\r\nimport {\r\n  PlusOutlined,\r\n  SendOutlined,\r\n  CloseOutlined,\r\n  CheckOutlined,\r\n  UploadOutlined,\r\n  DeleteOutlined\r\n} from \"@ant-design/icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { TweenOneGroup } from \"rc-tween-one\";\r\nimport randomcolor from \"randomcolores\";\r\nimport styles from \"./AddArticle.module.scss\";\r\nimport marked, { use }   from \"marked\"; // 导入marked\r\nimport hljs from \"highlight.js\"; // 导入高亮插件\r\nimport \"highlight.js/styles/monokai-sublime.css\"; //导入highlight的css\r\nimport \"moment/locale/zh-cn\"; // 时间选择时间格式\r\nimport locale from \"antd/es/date-picker/locale/zh_CN\";\r\nimport { articleTypeApi,postArticleApi,saveArticleApi } from \"../../api/api\";\r\nconst AddArticle = () => {\r\n  const { Option } = Select;\r\n  const history = useHistory();\r\n  const { TextArea } = Input;\r\n\r\n  /** mark配置*/\r\n  marked.setOptions({\r\n    renderer: new marked.Renderer(),\r\n    pedantic: false,\r\n    gfm: true,\r\n    tables: true,\r\n    breaks: false,\r\n    sanitize: false,\r\n    smartLists: true,\r\n    smartypants: false,\r\n    xhtml: false,\r\n    highlight: function (code) {\r\n      return hljs.highlightAuto(code).value;\r\n    },\r\n  });\r\n  const [visible, setVisible] = useState(false);      //抽屉显示隐藏\r\n  const [desHTMLContent, setDesHTMLContent] = useState(\r\n    \"这里是简介markDown预览\"\r\n  ); // 简介HTML内容\r\n  const [desContent,setDesContent] = useState('')\r\n  const [markDown,setMarkDown] = useState('')       //文章内容\r\n  const [HTMLContent, setHTMLContent] = useState(\"这里预览markDown\");   // markDown转换后文本\r\n  \r\n\r\n  const [inputVisible, setInputVisible] = useState(false);      // 便签文本框是否显示\r\n  const [inputValue, setInputValue] = useState(\"\");         //标签输入框内容\r\n  const [tags, setTags] = useState([]);          // 标签列表\r\n  const [articleType,setArticleType] = useState()  // 选中文章类别\r\n  const [typeList,setTypeList] = useState([])       // 文章类别列表\r\n  const [date,setDate] = useState('')     // 发布时间\r\n  const [title,setTitle] = useState('')     // 文字标题\r\n  const [articleOrder,setArticleOrder] = useState(true)\r\n\r\n  const tagItem = tags.map((item) => {\r\n    const tagElem = (\r\n      <Tag\r\n        closable\r\n        key={item.color}\r\n        color={item.color}\r\n        className={styles.tagList}\r\n      >\r\n        {item.title}\r\n      </Tag>\r\n    );\r\n    return <span key={item.title}>{tagElem}</span>;\r\n  });\r\n\r\n  // 点击Tag展示输入框\r\n  const showInput = () => {\r\n    setInputVisible(true);\r\n  };\r\n\r\n  // Tag输入框失焦或者回车事件\r\n  const handleInputConfirm = () => {\r\n    // for (let item of tags) {\r\n    if (inputValue) {\r\n      // console.log(item,inputValue);\r\n      const hexcolor = randomcolor.HEXColor;\r\n      tags.push({\r\n        title: inputValue,\r\n        color: hexcolor(),\r\n      });\r\n      setInputVisible(false);\r\n      setTags(tags);\r\n      setInputValue(\"\");\r\n      console.log(tags);\r\n      // return;\r\n    }\r\n    // }\r\n    // if (inputValue && tags.indexOf(inputValue) === -1) {\r\n    // const hexcolor = randomcolor.HEXColor;\r\n    // tags.push( {\r\n    //   title: inputValue,\r\n    //   color: hexcolor(),\r\n    // });\r\n    // setInputVisible(false);\r\n    // setTags(tags);\r\n    // setInputValue(\"\");\r\n    // console.log(tags);\r\n    // }\r\n  };\r\n\r\n  // 导入markDown\r\n  // const props = {\r\n  //   name: \"file\",\r\n  //   action: \"https://www.mocky.io/v2/5cc8019d300000980a055e76\",\r\n  //   headers: {\r\n  //     authorization: \"authorization-text\",\r\n  //   },\r\n  //   onChange(info) {\r\n  //     if (info.file.status !== \"uploading\") {\r\n  //       console.log(info.file, info.fileList);\r\n  //     }\r\n  //     if (info.file.status === \"done\") {\r\n  //       message.success(`${info.file.name} file uploaded successfully`);\r\n  //     } else if (info.file.status === \"error\") {\r\n  //       message.error(`${info.file.name} file upload failed.`);\r\n  //     }\r\n  //   },\r\n  //   beforeUpload: file => {\r\n  //     this.setState(state => ({\r\n  //       fileList: [...state.fileList, file],\r\n  //     }));\r\n  //     return false;\r\n  //   },\r\n  // };\r\n\r\n  /**\r\n   * 获取文本内容\r\n   * @param {Object} e 当前Input dom\r\n   */\r\n  const changeMdContent = (e) => {\r\n    // console.log(e.target.value);\r\n    setMarkDown(e.target.value)\r\n    let html = marked(e.target.value);\r\n    setHTMLContent(html);\r\n  };\r\n\r\n  /**\r\n   * 获取简介文本内容\r\n   * @param {Object} e 当前Input dom\r\n   */\r\n  const changeDescContent = (e) => {\r\n    // console.log(e.target.value);\r\n    setDesContent(e.target.value)\r\n    let html = marked(e.target.value);\r\n    setDesHTMLContent(html);\r\n  };\r\n\r\n  /**\r\n   * 发布文章\r\n   * @param(Array) tags 文章标签\r\n   * @param(String) desHTMLContent 文章简介\r\n   * @param(String) HTMLContent 内容简介\r\n   * @param(String) title 文章标题\r\n   * @param(String) date  文章发布日期\r\n   * @param(Number) articleType 文章类别 \r\n   * @param(Boolean) articleOrder 文章置顶排序\r\n   */\r\n  const postArticle = ()=> {\r\n    console.log(tags)  // 文字标签\r\n    console.log(desHTMLContent)  // 文字标签\r\n    console.log(markDown)  // 文字标签\r\n    console.log(title)  \r\n    console.log(date)\r\n    console.log(articleType)\r\n    console.log(articleOrder)\r\n    if(!markDown){\r\n      message.info('请填写文章内容~~')\r\n      return\r\n    }else if(!tags.length) {\r\n      message.info('请输入文章标签~~')\r\n      return\r\n    }else if(!desContent) {\r\n      message.info('请输入文章简介~~')\r\n      return\r\n    }else if(!title) {\r\n      message.info('请输入文章标题~~')\r\n      return\r\n    }else if(!articleType){\r\n      message.info('请输入文章类别~~')\r\n      return\r\n    }\r\n\r\n      /**请求接口 */\r\n    postArticleApi({\r\n      articleTitle: title,\r\n\r\n    }).then(res => {\r\n      console.log(res,'res')\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 文章暂存\r\n   * @param {}\r\n   */\r\n  const addDrafts = ()=> {\r\n      /**内容校验 */\r\n      if(!title){\r\n        message.info('请输入文章标题~~')\r\n        return\r\n      }else if (!markDown){\r\n        message.info('请填写文章内容~~')\r\n        return\r\n      }\r\n      /**请求接口 */\r\n      saveArticleApi({\r\n        articleTitle:title,\r\n        articleContent: markDown\r\n        \r\n      }).then(res => {\r\n        console.log(res)\r\n      })\r\n  }\r\n\r\n  // 获取文章类型\r\n  // useEffect(()=>{\r\n  //   articleTypeApi().then(res => {\r\n  //     // console.log(res,'res')\r\n  //     setTypeList(res)\r\n  //   })\r\n  // },[])\r\n\r\n  //  开启Drawer\r\n  const showDrawer = () => {\r\n    setVisible(true);\r\n  };\r\n\r\n  //  关闭Drawer\r\n  const onClose = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  // 返回上一页\r\n  const backPage = () => {\r\n    history.goBack();\r\n  };\r\n  return (\r\n    <main>\r\n      <div className={styles.titleWrap}>\r\n        <Input className={styles.titleInput} placeholder=\"输入文章标题......\" onChange={(e)=> setTitle(e.target.value)}/>\r\n        <Button type=\"link\" onClick={backPage}>\r\n          返回\r\n        </Button>\r\n        <Upload >\r\n          <Button type=\"text\" icon={<UploadOutlined />}>\r\n            导入MarkDown\r\n          </Button>\r\n        </Upload>\r\n        <Button type=\"primary\" shape=\"round\"  icon={<DeleteOutlined />}  >草稿</Button>\r\n\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          icon={<SendOutlined />}\r\n          className={styles.send}\r\n          ghost\r\n          onClick={showDrawer}\r\n        >\r\n          发布\r\n        </Button>\r\n      </div>\r\n      <Row gutter={5} className={styles.contextWrap}>\r\n        <Col span={12}>\r\n          <TextArea\r\n          value={markDown}\r\n            className={styles.codeWrap}\r\n            placeholder=\"BLOG内容......\"\r\n            onChange={changeMdContent}\r\n          ></TextArea>\r\n        </Col>\r\n        <Col span={12} className={styles.viewWrap}>\r\n          <div dangerouslySetInnerHTML={{ __html: HTMLContent }}>\r\n            {/* {HTMLContent} */}\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* 发布抽屉 */}\r\n      <Drawer\r\n        title=\"发布\"\r\n        placement=\"right\"\r\n        closable={false}\r\n        onClose={onClose}\r\n        visible={visible}\r\n        width=\"400\"\r\n        className={styles.drawerWrap}\r\n        getContainer={false}\r\n      >\r\n        <Form size=\"large\" layout=\"vertical\">\r\n          <Form.Item\r\n            label=\"BLOG简介\"\r\n            name=\"descContent\"\r\n            rules={[{ required: true, message: \"输入BLOG 简介!\" }]}\r\n          >\r\n            <TextArea\r\n              showCount\r\n              maxLength={100}\r\n              placeholder=\"BLOG简介......\"\r\n              autoSize={{ minRows: 5, maxRows: 8 }}\r\n              onChange={changeDescContent}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label=\"简介预览\" >\r\n            <div dangerouslySetInnerHTML={{ __html: desHTMLContent }}></div>\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"发布时间\"\r\n          >\r\n            <DatePicker  locale={locale} onChange={( ...date) => setDate(date[1])}/>\r\n          </Form.Item>\r\n          <Form.Item label='文章类别'>\r\n            <Select defaultValue={articleType}   placeholder='选择文章类别' onChange={(value)=>{setArticleType(value)}} allowClear>\r\n              {\r\n                typeList.map(item => (\r\n                  <Option key={item.typeId} value={item.typeId}>{item.title}</Option> \r\n                ))\r\n              }\r\n            </Select>\r\n          </Form.Item>\r\n          <Form.Item label=\"是否置顶显示\">\r\n            <Switch\r\n              checkedChildren={<CheckOutlined />}\r\n              unCheckedChildren={<CloseOutlined />}\r\n              checked={articleOrder}\r\n              onChange={checked => setArticleOrder(checked)}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item label=\"文章标签\">\r\n            <TweenOneGroup\r\n              enter={{\r\n                scale: 0.8,\r\n                opacity: 0,\r\n                type: \"from\",\r\n                duration: 400,\r\n                onComplete: (e) => {\r\n                  e.target.style = \"\";\r\n                },\r\n              }}\r\n              leave={{ opacity: 0, width: 0, scale: 0, duration: 400 }}\r\n              appear={false}\r\n            >\r\n              {tagItem}\r\n            </TweenOneGroup>\r\n            {/* {tags.map((item) => (\r\n              \r\n                 <Tag closable key={item.color} color={item.color}>\r\n                {item.title}\r\n              </Tag> \r\n            \r\n            ))} */}\r\n            {inputVisible && (\r\n              <Input\r\n                // ref={this.saveInputRef}\r\n                type=\"text\"\r\n                size=\"small\"\r\n                style={{ width: 78 }}\r\n                value={inputValue}\r\n                onChange={(e) => setInputValue(e.target.value)}\r\n                onBlur={handleInputConfirm}\r\n                onPressEnter={handleInputConfirm}\r\n                className={styles.addTag}\r\n              />\r\n            )}\r\n            {!inputVisible && (\r\n              <Tag onClick={showInput} className={styles.addTag}>\r\n                <PlusOutlined /> New Tag\r\n              </Tag>\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" block onClick={postArticle}>\r\n              发布文章\r\n            </Button>\r\n            <Button type=\"dashed\" block onClick={addDrafts}>\r\n              暂存草稿\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Drawer>\r\n    </main>\r\n  );\r\n};\r\nexport default AddArticle;\r\n","C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Data\\Data.jsx",[],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\Chat\\Chat.jsx",[],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\views\\ArticlesList\\ArticlesList.jsx",[],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\App.jsx",[],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\utils\\request.js",[],"C:\\Users\\Administrator\\Desktop\\personal-blog\\admin\\src\\api\\api.js",[],{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","severity":2,"message":"64","line":22,"column":34,"nodeType":"65","messageId":"66","endLine":22,"endColumn":46},{"ruleId":"67","severity":1,"message":"68","line":13,"column":1,"nodeType":"69","endLine":49,"endColumn":2},{"ruleId":"70","severity":1,"message":"71","line":14,"column":11,"nodeType":"65","messageId":"72","endLine":14,"endColumn":19},{"ruleId":"70","severity":1,"message":"73","line":15,"column":11,"nodeType":"65","messageId":"72","endLine":15,"endColumn":19},{"ruleId":"70","severity":1,"message":"74","line":1,"column":19,"nodeType":"65","messageId":"72","endLine":1,"endColumn":28},{"ruleId":"70","severity":1,"message":"75","line":28,"column":18,"nodeType":"65","messageId":"72","endLine":28,"endColumn":21},{"ruleId":"70","severity":1,"message":"76","line":33,"column":10,"nodeType":"65","messageId":"72","endLine":33,"endColumn":24},{"ruleId":"70","severity":1,"message":"77","line":67,"column":19,"nodeType":"65","messageId":"72","endLine":67,"endColumn":30},"no-native-reassign",["78"],"no-negated-in-lhs",["79"],"no-undef","'NotFoundPage' is not defined.","Identifier","undef","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-unused-vars","'userName' is assigned a value but never used.","unusedVar","'password' is assigned a value but never used.","'useEffect' is defined but never used.","'use' is defined but never used.","'articleTypeApi' is defined but never used.","'setTypeList' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]